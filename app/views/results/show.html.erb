<!-- app/views/results/show.html.erb -->
<div class="results-container">
  <h1 class="title-results">VOS RESULTATS</h1>
  <p class="results-description">Voici une sélection de parfums qui correspondent parfaitement à vos goûts et préférences olfactives. Selon vos réponses, vous découvrirez des fragrances avec des notes de tête fraîches et fruitées, des notes de cœur florales et élégantes, ainsi que des notes de fond chaleureuses et boisées. Explorez ces créations uniques qui reflètent votre personnalité !</p>

  <p class="results-amount">NOMBRE DE RÉSULTATS : <%= @perfumes_count %></p>

  <ul class="perfume-list">
    <% @perfumes.each do |perfume| %>
      <li class="perfume-item">
        <div class="card">
          <%= link_to perfume_path(perfume), class: "text-decoration-none text-dark" do %>
            <div class="position-relative">
              <img src="<%= perfume.photo %>" class="card-img-top" alt="<%= perfume.name %>">
              <button class="btn btn-link position-absolute top-0 end-0"><i class="bi bi-heart"></i></button>
            </div>
            <div class="card-body">
              <h5 class="card-title"><%= perfume.name %></h5>
              <p class="card-text"><%= perfume.brand %></p>
              <p class="card-text"><%= number_to_currency(perfume.price, unit: "€") %></p>
              <%= link_to "Ajouter à mes favoris", perfume_favorites_path(perfume), data: { turbo_method: :post } %>
              <p class="card-text">Avis (<%= perfume.reviews.count %>)</p>
              <div class="rating">
                <% average_rating = perfume.reviews.average(:rating).to_f.round(1) %>
                <% average_rating.to_i.times do %>
                  <i class="bi bi-star-fill"></i>
                <% end %>
                <% (5 - average_rating.to_i).times do %>
                  <i class="bi bi-star"></i>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
